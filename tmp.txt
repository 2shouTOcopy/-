# /data1/zhoufeng20/work/tmp/grpc_install/src/grpc-1.40.0/third_party/boringssl-with-bazel/CMakeLists.txt

# ... (文件前面部分，保留 copyright, project 等) ...

# --- Start: Force ARCH to aarch64 for cross-compilation ---
# This section replaces the complex architecture detection logic in BoringSSL's CMakeLists.txt.
# We are cross-compiling to aarch64, so we directly set the ARCH variable.
if(CMAKE_CROSSCOMPILING)
  set(ARCH "aarch64")
  message(STATUS "BoringSSL: Forcing ARCH=${ARCH} due to cross-compilation.")
else()
  # Retain original logic for native compilation, in case this file is used elsewhere
  # but for cross-compilation, the above `if(CMAKE_CROSSCOMPILING)` handles it.
  # If this block still causes issues during native (e.g. host tool) build,
  # consider copying the original if/elseif/else logic here from the original file.

  # For now, let's copy the original if/elseif/else block here, but it should be
  # skipped by CMAKE_CROSSCOMPILING.
  If(OPENSSL_NO_ASM)
    add_definitions(-DOPENSSL_NO_ASM)
    set(ARCH "generic")
  elseif(${CMAKE_SYSTEM_PROCESSOR} STREQUAL "x86_64")
    set(ARCH "x86_64")
  elseif(${CMAKE_SYSTEM_PROCESSOR} STREQUAL "amd64")
    set(ARCH "x86_64")
  elseif(${CMAKE_SYSTEM_PROCESSOR} STREQUAL "AMD64")
    if(CMAKE_SIZEOF_VOID_P EQUAL 8)
      set(ARCH "x86_64")
    else()
      set(ARCH "x86")
    endif()
  elseif(${CMAKE_SYSTEM_PROCESSOR} STREQUAL "x86")
    set(ARCH "x86")
  elseif(${CMAKE_SYSTEM_PROCESSOR} STREQUAL "i386")
    set(ARCH "x86")
  elseif(${CMAKE_SYSTEM_PROCESSOR} STREQUAL "i686")
    set(ARCH "x86")
  elseif(${CMAKE_SYSTEM_PROCESSOR} STREQUAL "aarch64")
    set(ARCH "aarch64")
  elseif(${CMAKE_SYSTEM_PROCESSOR} STREQUAL "arm64")
    set(ARCH "aarch64")
  elseif(${CMAKE_SYSTEM_PROCESSOR} STREQUAL "arm64e")
    set(ARCH "aarch64")
  elseif(${CMAKE_SYSTEM_PROCESSOR} MATCHES "^arm*")
    set(ARCH "arm")
  elseif(${CMAKE_SYSTEM_PROCESSOR} STREQUAL "mips")
    set(ARCH "generic")
  elseif(${CMAKE_SYSTEM_PROCESSOR} STREQUAL "ppc64le")
    set(ARCH "ppc64le")
  else()
    message(FATAL_ERROR "Unknown processor:" ${CMAKE_SYSTEM_PROCESSOR})
  endif()
endif()
# --- End: Force ARCH to aarch64 ---

# ... (文件其余部分，包括 add_library 等) ...
